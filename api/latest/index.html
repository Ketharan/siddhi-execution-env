



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.9.2">
    
    
      
        <title>latest - Siddhi-Execution-Env</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#api-docs-v1011" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Siddhi-Execution-Env" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Siddhi-Execution-Env
              </span>
              <span class="md-header-nav__topic">
                latest
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Siddhi-Execution-Env
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Welcome to Siddhi Execution Extension - Env" class="md-nav__link">
      Welcome to Siddhi Execution Extension - Env
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      API Docs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        API Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.11/" title="1.0.11" class="md-nav__link">
      1.0.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.10/" title="1.0.10" class="md-nav__link">
      1.0.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.9/" title="1.0.9" class="md-nav__link">
      1.0.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.8/" title="1.0.8" class="md-nav__link">
      1.0.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.7/" title="1.0.7" class="md-nav__link">
      1.0.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.6/" title="1.0.6" class="md-nav__link">
      1.0.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.5/" title="1.0.5" class="md-nav__link">
      1.0.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.4/" title="1.0.4" class="md-nav__link">
      1.0.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.3/" title="1.0.3" class="md-nav__link">
      1.0.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.2/" title="1.0.2" class="md-nav__link">
      1.0.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.1/" title="1.0.1" class="md-nav__link">
      1.0.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../1.0.0/" title="1.0.0" class="md-nav__link">
      1.0.0
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        latest
      </label>
    
    <a href="./" title="latest" class="md-nav__link md-nav__link--active">
      latest
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#env" title="Env" class="md-nav__link">
    Env
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getenvironmentproperty-function" title="getEnvironmentProperty (Function)" class="md-nav__link">
    getEnvironmentProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getoriginipfromxforwarded-function" title="getOriginIPFromXForwarded (Function)" class="md-nav__link">
    getOriginIPFromXForwarded (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getsystemproperty-function" title="getSystemProperty (Function)" class="md-nav__link">
    getSystemProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getuseragentproperty-function" title="getUserAgentProperty (Function)" class="md-nav__link">
    getUserAgentProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getyamlproperty-function" title="getYAMLProperty (Function)" class="md-nav__link">
    getYAMLProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resourceidentifier-stream-processor" title="resourceIdentifier (Stream Processor)" class="md-nav__link">
    resourceIdentifier (Stream Processor)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resourcebatch-window" title="resourceBatch (Window)" class="md-nav__link">
    resourceBatch (Window)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#env" title="Env" class="md-nav__link">
    Env
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getenvironmentproperty-function" title="getEnvironmentProperty (Function)" class="md-nav__link">
    getEnvironmentProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getoriginipfromxforwarded-function" title="getOriginIPFromXForwarded (Function)" class="md-nav__link">
    getOriginIPFromXForwarded (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getsystemproperty-function" title="getSystemProperty (Function)" class="md-nav__link">
    getSystemProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getuseragentproperty-function" title="getUserAgentProperty (Function)" class="md-nav__link">
    getUserAgentProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getyamlproperty-function" title="getYAMLProperty (Function)" class="md-nav__link">
    getYAMLProperty (Function)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resourceidentifier-stream-processor" title="resourceIdentifier (Stream Processor)" class="md-nav__link">
    resourceIdentifier (Stream Processor)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resourcebatch-window" title="resourceBatch (Window)" class="md-nav__link">
    resourceBatch (Window)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="api-docs-v1011">API Docs - v1.0.11</h1>
<h2 id="env">Env</h2>
<h3 id="getenvironmentproperty-function">getEnvironmentProperty <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#function">(Function)</a></em></h3>
<p style="word-wrap: break-word">This function returns the Java environment property that corresponds with the key provided</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>&lt;STRING&gt; env:getEnvironmentProperty(&lt;STRING&gt; key, &lt;STRING&gt; default.value)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">key</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the key of the property to be read.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">default.value</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the default value to be returned if the property value is not available.</td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>define stream keyStream (key string);
from keyStream env:getEnvironmentProperty(key) as FunctionOutput 
insert into outputStream;
</code></pre>

<p style="word-wrap: break-word">This query returns the Java environment property that corresponds with the key from the 'keyStream' as 'FunctionOutput' to the outputStream.</p>

<h3 id="getoriginipfromxforwarded-function">getOriginIPFromXForwarded <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#function">(Function)</a></em></h3>
<p style="word-wrap: break-word">This function returns the public origin IP from the given X-Forwarded header.</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>&lt;STRING&gt; env:getOriginIPFromXForwarded(&lt;STRING&gt; xforwardedheader)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">xforwardedheader</td>
        <td style="vertical-align: top; word-wrap: break-word">The 'X-Forwarded-For' header of the request.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>define stream InputStream (xForwardedHeader string);
from InputStream select env:getOriginIPFromXForwarded(xForwardedHeader) as originIP 
insert into OutputStream;
</code></pre>

<p style="word-wrap: break-word">This query returns the public origin IP from the given X-Forwarded header as 'originIP', and inserts it to the 'OutputStream' stream.</p>

<h3 id="getsystemproperty-function">getSystemProperty <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#function">(Function)</a></em></h3>
<p style="word-wrap: break-word">This function returns the system property referred to via the system property key.</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>&lt;STRING&gt; env:getSystemProperty(&lt;STRING&gt; key, &lt;STRING&gt; default.value)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">key</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the key of the property to be read.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">default.value</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the default value to be returned if the property value is not available.</td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>define stream KeyStream (key string);
from KeyStream env:getSystemProperty(key) as FunctionOutput 
insert into OutputStream;
</code></pre>

<p style="word-wrap: break-word">This query returns the system property that corresponds with the key from the 'KeyStream' stream as the 'FunctionOutput' to the 'OutputStream' stream.</p>

<h3 id="getuseragentproperty-function">getUserAgentProperty <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#function">(Function)</a></em></h3>
<p style="word-wrap: break-word">This function returns the value that corresponds with a specified property name of a specified user agent</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>&lt;STRING&gt; env:getUserAgentProperty(&lt;STRING&gt; user.agent, &lt;STRING&gt; property.name)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">user.agent</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the user agent from which the property needs to be extracted.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">property.name</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the property name that needs to be extracted. Supported property names are 'browser', 'os', and 'device'.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="system-parameters" class="md-typeset" style="display: block; font-weight: bold;">System Parameters</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Parameters</th>
    </tr>
    <tr>
        <td style="vertical-align: top">regexFilePath</td>
        <td style="vertical-align: top; word-wrap: break-word">The location of the yaml file that contains the regex to process the user agent.</td>
        <td style="vertical-align: top">Default regexes included in the ua_parser library</td>
        <td style="vertical-align: top">N/A</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>define stream UserAgentStream (userAgent string);
from UserAgentStream 
select env:getUserAgentProperty(userAgent, &quot;browser&quot;) as functionOutput 
insert into OutputStream;
</code></pre>

<p style="word-wrap: break-word">This query returns the browser name of the 'userAgent' from the 'UserAgentStream' stream as 'functionOutput', and inserts it into the 'OutputStream'stream.</p>

<h3 id="getyamlproperty-function">getYAMLProperty <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#function">(Function)</a></em></h3>
<p style="word-wrap: break-word">This function returns the YAML property requested or the default values specified if such avariable is not specified in the 'deployment.yaml'.</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>&lt;INT|LONG|DOUBLE|FLOAT|STRING|BOOL&gt; env:getYAMLProperty(&lt;STRING&gt; key, &lt;STRING&gt; data.type, &lt;INT|LONG|DOUBLE|FLOAT|STRING|BOOL&gt; default.value)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">key</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies key of the property to be read.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">data.type</td>
        <td style="vertical-align: top; word-wrap: break-word">A string constant parameter expressing the data type of the propertyusing one of the following string values:<br>&nbsp;int, long, float, double, string, bool.</td>
        <td style="vertical-align: top">string</td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">default.value</td>
        <td style="vertical-align: top; word-wrap: break-word">This specifies the default value to be returned if the property value is not available.</td>
        <td style="vertical-align: top">null</td>
        <td style="vertical-align: top">INT<br>LONG<br>DOUBLE<br>FLOAT<br>STRING<br>BOOL</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>define stream KeyStream (key string);
from KeyStream  env:getYAMLProperty(key) as FunctionOutput 
insert into outputStream;
</code></pre>

<p style="word-wrap: break-word">This query returns the corresponding YAML property for the corresponding key from the 'KeyStream' stream as 'FunctionOutput', and inserts it into the to the 'OutputStream' stream.</p>

<h3 id="resourceidentifier-stream-processor">resourceIdentifier <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#stream-processor">(Stream Processor)</a></em></h3>
<p style="word-wrap: break-word">The resource identifier stream processor is an extension to register a resource name with a reference in a static map and serve a static resources count for a specific resource name.</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>env:resourceIdentifier(&lt;STRING&gt; resource.group.id)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">resource.group.id</td>
        <td style="vertical-align: top; word-wrap: break-word">The name of the resource group.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>@info(name='product_color_code_rule') 
from SweetProductDefectsDetector#env:resourceIdentifier(&quot;rule-group-1&quot;)
select productId, ifThenElse(colorCode == '#FF0000', true, false) as isValid
insert into DefectDetectionResult;

@info(name='product_dimensions_rule') 
from SweetProductDefectsDetector#env:resourceIdentifier(&quot;rule-group-1&quot;)
select productId, ifThenElse(height == 5 &amp;&amp; width ==10, true, false) as isValid
insert into DefectDetectionResult;
@info(name='defect_analyzer') 
from DefectDetectionResult#window.env:resourceBatch(&quot;rule-group-1&quot;, productId, 60000)
select productId, and(not isValid) as isDefected
insert into SweetProductDefectAlert;
</code></pre>

<p style="word-wrap: break-word">'product_color_code_rule' and 'product_dimensions_rule' are two rule-based queries that process the same events from the 'SweetProductDefectsDetector' stream. They both insert their process results as the output into the 'DefectDetectionResult' output stream.<br><br>Multiple queries like this can be added in the Siddhi Application and the number of output events inserted into the 'DefectDetectionResult' stream depends on the number of available queries. If you need to further aggregate results for a particular correlation ID ('productId' in this scenario) from the 'DefectDetectionResult' stream, follow-up queries need to wait for events with same value for the 'productId' attribute from all the available queries. For this, follow-up queries need to identify the number of events that can be expected from these rule-based queries with a specific value for 'productID'. To address this requirement, a resource identifier named 'rule-group-1' is assigned to both the rule queries. The 'defect_analyzer' query includes the 'env:resourceBatch' window to derive the count for the registered resource named 'rule-group-1' count from the output of both the queries within a specific time period. All of these factors determine the event waiting condition for events from the 'DefectDetectionResult' stream.</p>

<h3 id="resourcebatch-window">resourceBatch <em><a target="_blank" href="https://wso2.github.io/siddhi/documentation/siddhi-4.0/#window">(Window)</a></em></h3>
<p style="word-wrap: break-word">This extension is a resource batch (tumbling) window that holds a number of events based on the resource count inferred from the 'env:resourceIdentifier' extension, and with a specific attribute as the grouping key. The window is updated each time a batch of events arrive with a matching value for the grouping key, and where the number of events is equal to the resource count.</p>

<p><span id="syntax" class="md-typeset" style="display: block; font-weight: bold;">Syntax</span></p>
<pre><code>env:resourceBatch(&lt;STRING&gt; resource.group.id, &lt;INT|LONG|FLOAT|BOOL|DOUBLE&gt; correlation.id, &lt;INT|LONG|TIME&gt; time.in.milliseconds)
</code></pre>

<p><span id="query-parameters" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">QUERY PARAMETERS</span>
<table>
    <tr>
        <th>Name</th>
        <th style="min-width: 20em">Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td style="vertical-align: top">resource.group.id</td>
        <td style="vertical-align: top; word-wrap: break-word">The name of the resource group.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">STRING</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">correlation.id</td>
        <td style="vertical-align: top; word-wrap: break-word">The attribute that should be used for event correlation.</td>
        <td style="vertical-align: top"></td>
        <td style="vertical-align: top">INT<br>LONG<br>FLOAT<br>BOOL<br>DOUBLE</td>
        <td style="vertical-align: top">No</td>
        <td style="vertical-align: top">No</td>
    </tr>
    <tr>
        <td style="vertical-align: top">time.in.milliseconds</td>
        <td style="vertical-align: top; word-wrap: break-word">The time period to wait for the arrival of a new event before generating the output for events belonging to a specific batch and flushing them.</td>
        <td style="vertical-align: top">300000</td>
        <td style="vertical-align: top">INT<br>LONG<br>TIME</td>
        <td style="vertical-align: top">Yes</td>
        <td style="vertical-align: top">No</td>
    </tr>
</table></p>
<p><span id="examples" class="md-typeset" style="display: block; font-weight: bold;">Examples</span>
<span id="example-1" class="md-typeset" style="display: block; color: rgba(0, 0, 0, 0.54); font-size: 12.8px; font-weight: bold;">EXAMPLE 1</span></p>
<pre><code>define stream SweetProductDefectsDetector(productId string, colorCode string, height long, width long);
define stream SweetProductDefectAlert(productId string, isDefected bool);

@info(name='product_color_code_rule') 
from SweetProductDefectsDetector#env:resourceIdentifier(&quot;rule-group-1&quot;)
select productId, ifThenElse(colorCode == '#FF0000', true, false) as isValid
insert into DefectDetectionResult;

@info(name='product_dimensions_rule') 
from SweetProductDefectsDetector#env:resourceIdentifier(&quot;rule-group-1&quot;)
select productId, ifThenElse(height == 5 &amp;&amp; width ==10, true, false) as isValid
insert into DefectDetectionResult;

@info(name='defect_analyzer') 
from DefectDetectionResult#window.env:resourceBatch(&quot;rule-group-1&quot;, productId, 60000)
select productId, and(not isValid) as isDefected
insert into SweetProductDefectAlert;
</code></pre>

<p style="word-wrap: break-word">This example demonstrates the usage of the 'env:resourceBatch' widow extension with the 'env:resourceIdentifier' stream processor and the 'and' attribute aggregator extension.<br><br>Data relating to the sweet production is received into the 'SweetProductDefectsDetector' input stream. This data is consumed by two rule queries named 'product_color_code_rule' and 'product_dimensions_rule'.<br><br>The follow-up query named 'defect_analyzer' needs to wait for the output results of both the rule queries mentioned above, and generate an output based on aggregated results.<br><br>To ensure that each event from the 'SweetProductDefectsDetector' input stream is processed by both the rule queries, they are grouped together. This is done by assigning a resource identifier named 'rule-group-1' to each rule query.<br><br>The 'defect_analyzer' follow-up query waits until an equal number of output events with the same value for the 'productID' attribute are generated by both the rule queries for the 'rule-group-1' resource identifier. Then it selects the events where  the product ID is matching and the value for the 'isValid' attribute is not 'true'.<br><br>When deriving this output, a 'resourceBatch' time window of 2000 milliseconds is considered. This checks whether events that match the criteria outlined above occurs within a time period of 2000 milliseconds in a tumbling manner. If the criteria is not met within 2000 events, the events within that time window are considered expired and flushed from the window. If the criteria is met within the time window of 2000 milliseconds, the output is inserted into the "SweetProductDefectAlert' output stream as boolean values where 'isDefected' attribute is set to 'true'. The sample output can be as given below.<br><br>Input 1: [SweetProductDefectsDetector]<br>{  <br>&nbsp;&nbsp;&nbsp;"event":{  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"productId":"Cake",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"colorCode":"FF0000",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"height": 5,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"width": 10<br><br>&nbsp;&nbsp;&nbsp;}<br>}<br><br>Output 1:[SweetProductDefectAlert]<br>{  <br>&nbsp;&nbsp;&nbsp;"event":{  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"productId":"Cake",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"isDefected":"false"<br>&nbsp;&nbsp;&nbsp;}<br>}<br><br>Input 2: [SweetProductDefectsDetector]<br>{  <br>&nbsp;&nbsp;&nbsp;"event":{  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"productId":"Cake",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"colorCode":"FF0000",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"height": 10,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"width": 20<br><br>&nbsp;&nbsp;&nbsp;}<br>}<br><br>Output 2:[SweetProductDefectAlert]<br>{  <br>&nbsp;&nbsp;&nbsp;"event":{  <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"productId":"Cake",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"isDefected":"true"<br>&nbsp;&nbsp;&nbsp;}<br>}</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../1.0.0/" title="1.0.0" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                1.0.0
              </span>
            </div>
          </a>
        
        
          <a href="../../license/" title="License" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                License
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:"../.."}})</script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-103065-28","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>